{% extends "base.html" %}
{% block content %}


<!-- Your code here ! -->
<div id="container"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {

    (async () => {
        let task_data = await fetch('./data').then(r => r.json());

    var myChart = Highcharts.chart('container', {
      chart: {
          type: 'scatter'
      },
      title: {
          text: 'Sensor Readings'
      },
      xAxis: {
          categories: ['Sensor 0','Sensor 1','Sensor 2','Sensor 3','Sensor 4','Sensor 5','Sensor 6','Sensor 7','Sensor 8','Sensor 9']
      },
      yAxis: {
          title: {
              text: 'Sensor Reading'
          },
          height: '100%',
          max: 1
      },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 4,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: 'Sensor Reading:{point.y} <br>Sample Number: {point.options.sample}'
                },
                opacity: 0.4
            },
            series: {
                turboThreshold: 4000,
            }
        },
        
      series: [{
          name: 'Class 1',
          data: task_data['class1']['sensor0'].map((s,i) => {return {x:0, y:s, sample:i}}).concat(
            task_data['class1']['sensor1'].map((s,i) => {return {x:1, y:s, sample:i}}),
            task_data['class1']['sensor2'].map((s,i) => {return {x:2, y:s, sample:i}}),
            task_data['class1']['sensor3'].map((s,i) => {return {x:3, y:s, sample:i}}),
            task_data['class1']['sensor4'].map((s,i) => {return {x:4, y:s, sample:i}}),
            task_data['class1']['sensor5'].map((s,i) => {return {x:5, y:s, sample:i}}),
            task_data['class1']['sensor6'].map((s,i) => {return {x:6, y:s, sample:i}}),
            task_data['class1']['sensor7'].map((s,i) => {return {x:7, y:s, sample:i}}),
            task_data['class1']['sensor8'].map((s,i) => {return {x:8, y:s, sample:i}}),
            task_data['class1']['sensor9'].map((s,i) => {return {x:9, y:s, sample:i}})
          )
      },
      {
          name: 'Class 2',
          data: task_data['class2']['sensor0'].map((s,i) => {return {x:0, y:s, sample:i}}).concat(
            task_data['class2']['sensor1'].map((s,i) => {return {x:1, y:s, sample:i}}),
            task_data['class2']['sensor2'].map((s,i) => {return {x:2, y:s, sample:i}}),
            task_data['class2']['sensor3'].map((s,i) => {return {x:3, y:s, sample:i}}),
            task_data['class2']['sensor4'].map((s,i) => {return {x:4, y:s, sample:i}}),
            task_data['class2']['sensor5'].map((s,i) => {return {x:5, y:s, sample:i}}),
            task_data['class2']['sensor6'].map((s,i) => {return {x:6, y:s, sample:i}}),
            task_data['class2']['sensor7'].map((s,i) => {return {x:7, y:s, sample:i}}),
            task_data['class2']['sensor8'].map((s,i) => {return {x:8, y:s, sample:i}}),
            task_data['class2']['sensor9'].map((s,i) => {return {x:9, y:s, sample:i}})
          )
      }
      
      
      ]
  });
        //console.log(myChart.series[0].data);
        //console.log(task_data['class1']);
        //console.log(task_data['class2']);
        console.log(

            task_data['class1']['sensor1'].map((s,i) => {return {x:0, y:s, sample:i}}).concat(
            task_data['class1']['sensor1'].map((s,i) => {return {x:1, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:2, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:3, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:4, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:5, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:6, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:7, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:8, y:s, sample:i}}),
            task_data['class1']['sensor1'].map((s,i) => {return {x:9, y:s, sample:i}})
          )
        )


    })()
    
});
  </script>


{% endblock %}